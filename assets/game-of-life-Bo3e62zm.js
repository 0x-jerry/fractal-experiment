import{u as h,a as _,_ as p}from"./useCanvasRunner-BtSyTrXL.js";import{R as w}from"./pseudorandom-9FEvop_2.js";import{G as v}from"./grid-BnBmgwES.js";import"./vec2-ikhXc4Ii.js";import{d as g,e as C,b as S,o as G,c as x,w as z,a as M,u as R}from"./index-B1bq4_oz.js";const b=g({__name:"game-of-life",setup(B){const i=h({color:"#f26f6f",size:{_:!0,min:5,step:1,value:20},FPS:{_:!0,step:1,value:24,min:8,max:60},refresh(){f()}});w();class l extends v{getSurroundCount(e,s){let a=0;for(let n=e-1;n<=e+1;n++)for(let t=s-1;t<=s+1;t++)n===e&&t===s||(a+=this.get(n,t)||0);return a}}const o=new l;C(()=>i.value.size,()=>{f()});const u=_(d,{fps:()=>i.value.FPS});S(()=>{f()});function f(){const c=u.ctx.canvas,{width:e,height:s}=c,{size:a}=i.value;o.w=Math.ceil(e/a),o.h=Math.ceil(s/a),o.clear(),o.forEach((n,t,r)=>{o.set(t,r,Math.random()>.9?1:0)})}function d(c){const{size:e}=i.value,s=new l(o.w,o.h);o.forEach((a=0,n,t)=>{const r=o.getSurroundCount(n,t),m=r<2?0:r===3&&a===0?1:r>3?0:a;m===1&&r>3&&console.log(a,n,t,r),s.set(n,t,m),c.fillStyle=a===0?"white":i.value.color,c.fillRect(n*e,t*e,e,e)}),o.data=s.data}return(c,e)=>(G(),x(p,{title:"Conway's Game of Life"},{default:z(()=>[M("div",{ref:R(u).ctx.ref,class:"w-full h-full"},null,512)]),_:1}))}});export{b as default};
